<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neural-Link Memory Game</title>
  <!-- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —à—Ä–∏—Ñ—Ç Space Mono -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #0a0a0a;
      --card-bg: #230800;
      --accent-color: #fad7d1;
    }

    body {
      margin: 0;
      font-family: 'Space Mono', 'Courier New', monospace;
      background: var(--bg-color);
      color: var(--accent-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px;
      box-sizing: border-box;
    }

    h1 {
      margin: 20px 0 10px;
      text-shadow: 0 0 10px var(--accent-color), 0 0 20px var(--accent-color);
      font-size: 2.2rem;
      font-weight: 700;
      text-align: center;
    }

    #instructions {
      max-width: 500px;
      width: 100%;
      text-align: center;
      margin-bottom: 20px;
      font-size: 1rem;
      line-height: 1.5;
      background: rgba(35, 8, 0, 0.4); /* #230800 with alpha */
      border: 1px solid var(--accent-color);
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 10px rgba(35, 8, 0, 0.5);
    }

    #stats {
      display: flex;
      gap: 20px;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    #best-score {
      margin-bottom: 20px;
      font-size: 1rem;
      opacity: 0.9;
    }

    #game-board {
      display: grid;
      /* grid-template-columns: repeat(4, 1fr); */ /* <- –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS */
      gap: 15px;
      perspective: 1000px;
      /* max-width: 500px; */ /* <- –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS */
      width: 100%;
      margin: 20px auto;
      transition: max-width 0.5s ease-in-out; /* <- –î–æ–±–∞–≤–∏–ª –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ */
    }

    .card {
      width: 100%;
      padding-top: 100%; /* square cards */
      position: relative;
      cursor: pointer;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }

    .card.flip {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      border-radius: 10px;
      backface-visibility: hidden;
      box-shadow: 0 0 15px rgba(35, 8, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* –û–ë–ù–û–í–õ–ï–ù–û: –†—É–±–∞—à–∫–∞ –∫–∞—Ä—Ç—ã —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –∏ –∑–Ω–∞–∫–æ–º –≤–æ–ø—Ä–æ—Å–∞ */
    .card-front {
      /* background: linear-gradient(145deg, var(--card-bg), #1a1a1a); */
      background-image: url('https://raw.githubusercontent.com/KAMEVETRICS/GENSYN-MEMORY-GAME/main/images/gen.png');
      background-size: 60%;
      background-repeat: no-repeat;
      background-position: center;
      background-color: var(--card-bg); /* –§–æ–Ω, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è */
      font-weight: bold;
      /* font-size: 2.5rem; */ /* –£–¥–∞–ª–µ–Ω–æ, —Ç–µ–ø–µ—Ä—å –Ω–∞ span */
      /* color: var(--accent-color); */ /* –£–¥–∞–ª–µ–Ω–æ, —Ç–µ–ø–µ—Ä—å –Ω–∞ span */
      position: relative;
      overflow: hidden;
    }

    /* –û–ë–ù–û–í–õ–ï–ù–û: –°—Ç–∏–ª–∏ –¥–ª—è –∑–Ω–∞–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ */
    .card-front span {
      font-size: 2.5rem; /* –†–∞–∑–º–µ—Ä –∑–Ω–∞–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ */
      font-weight: 700;
      color: var(--accent-color);
      text-shadow: 0 0 8px var(--accent-color);
    }

    /* –ü—Ä–æ—Å—Ç–æ–π —Å–∏–º–≤–æ–ª –¥–ª—è –¥–∏–∑–∞–π–Ω–∞ - –£–î–ê–õ–ï–ù–û
    .card-front::before {
      content: '‚úß';
      color: var(--accent-color);
      opacity: 0.3;
      font-size: 3rem;
      text-shadow: 0 0 10px var(--accent-color);
    }
    */

    .card-back {
      transform: rotateY(180deg);
      background: var(--card-bg); /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
    }

    .card-back img {
      width: 90%;
      height: 90%;
      object-fit: contain; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏, —á—Ç–æ–±—ã –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∏—Å–∫–∞–∂–∞–ª–∞—Å—å */
      border-radius: 5px; /* –ù–µ–±–æ–ª—å—à–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–ª—è —Å–∞–º–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
    }

    button {
      margin-top: 15px;
      padding: 10px 25px;
      border: 2px solid var(--accent-color);
      background: transparent;
      color: var(--accent-color);
      font-size: 16px;
      font-weight: 700;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
    }

    button:hover {
      background: var(--accent-color);
      color: var(--card-bg); /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
      box-shadow: 0 0 15px var(--accent-color);
    }

    /* Modal finish message */
    #finish-modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    #finish-content {
      background: var(--card-bg);
      border: 2px solid var(--accent-color);
      border-radius: 12px;
      padding: 30px;
      text-align: center;
      color: var(--accent-color);
      box-shadow: 0 0 25px var(--card-bg), 0 0 50px var(--accent-color);
      animation: pop 0.5s ease;
    }

    #finish-content h2 {
      margin-bottom: 20px;
      text-shadow: 0 0 10px var(--accent-color);
    }

    @keyframes pop {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* Mobile tweaks */
    @media (max-width: 600px) {
      #game-board {
        gap: 10px;
      }
      h1 {
        font-size: 1.8rem;
      }
      #stats {
        flex-direction: column;
        gap: 5px;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- –¢–µ–∫—Å—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, –∫–∞–∫ —Ç—ã –∏ –ø—Ä–æ—Å–∏–ª -->
  <h1>GENSYN MEMORY</h1>
  <div id="instructions">
    Find the matching pairs. Test your memory. Level 1: 4 Pairs | Level 2: 8 Pairs | Level 3: 16 Pairs
  </div>

  <div id="stats">
    <div>‚è± Time: <span id="time">0</span>s</div>
    <div>üéØ Moves: <span id="moves">0</span></div>
  </div>

  <div id="best-score">
    üèÜ Best Time: <span id="best-time">‚Äì</span>s | Best Moves: <span id="best-moves">‚Äì</span>
  </div>

  <div id="game-board"></div>
  <button onclick="startGame()">üîÑ Start New Game</button>

  <!-- Finish Modal -->
  <div id="finish-modal">
    <div id="finish-content">
      <h2>Level Complete!</h2>
      <p>You matched all pairs successfully.</p>
      <p>‚è± Time: <span id="final-time"></span>s</p>
      <p>üéØ Moves: <span id="final-moves"></span></p>
      <button onclick="closeModal();">Close</button>
      <button onclick="closeModal(); startGame();">Play Again</button>
    </div>
  </div>

<script>
// –û–ë–ù–û–í–õ–ï–ù–û: –ú–∞—Å—Å–∏–≤ –∏–∑ 17 –∫–∞—Ä—Ç–∏–Ω–æ–∫.
// –ü—Ä–æ—Å—Ç–æ —É–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–≤–æ–∏ 17 –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤ –ø–∞–ø–∫–µ /images
// –∏ –Ω–∞–∑–≤–∞–Ω—ã –æ—Ç 1.png –¥–æ 17.png (–∏–ª–∏ 17.jpg, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ - –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è–π –∑–¥–µ—Å—å)
const arts = [
  "images/1.png", "images/2.png", "images/3.png", "images/4.png", 
  "images/5.png", "images/6.png", "images/7.png", "images/8.jpg", // 8.jpg –∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
  "images/9.png", "images/10.png", "images/11.png", "images/12.png",
  "images/13.png", "images/14.png", "images/15.png", "images/16.png",
  "images/17.png"
];

let firstCard = null;
let lockBoard = false;
let matchedPairs = 0;
let moves = 0;
let timer = null;
let seconds = 0;
let gameStarted = false;
let currentLevel = 1;

// –û–ë–ù–û–í–õ–ï–ù–û: –ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Ä–æ–≤–Ω–µ–π, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –∫–∞—Ä—Ç–∏–Ω–æ–∫
// –£—Ä–æ–≤–µ–Ω—å 1: 4 –ø–∞—Ä—ã (8 –∫–∞—Ä—Ç)
// –£—Ä–æ–≤–µ–Ω—å 2: 8 –ø–∞—Ä (16 –∫–∞—Ä—Ç)
// –£—Ä–æ–≤–µ–Ω—å 3: 16 –ø–∞—Ä (32 –∫–∞—Ä—Ç—ã)
const levelConfigs = {
  1: 4, 
  2: 8,
  3: 16 
};

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function startGame() {
  currentLevel = 1;
  initLevel();
}

function initLevel() {
  const board = document.getElementById("game-board");
  board.innerHTML = "";
  firstCard = null;
  lockBoard = false;
  matchedPairs = 0;
  moves = 0;
  seconds = 0;
  gameStarted = false; // –ò–ó–ú–ï–ù–ï–ù–û: –ò–≥—Ä–∞ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞

  document.getElementById("moves").innerText = moves;
  document.getElementById("time").innerText = seconds; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º 0
  clearInterval(timer); // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –±—ã–ª

  /* –£–î–ê–õ–ï–ù–û: –ë–ª–æ–∫ —Ç–∞–π–º–µ—Ä–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ flipCard
  timer = setInterval(() => {
    if (gameStarted) {
      seconds++;
      document.getElementById("time").innerText = seconds;
    }
  }, 1000);
  */

  const pairs = levelConfigs[currentLevel];
  // –ë–µ—Ä–µ–º X —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏–∑ –≤—Å–µ–≥–æ –ø—É–ª–∞ (arts)
  const selected = shuffle([...arts]).slice(0, pairs);
  const cards = shuffle([...selected, ...selected]);

  // –û–ë–ù–û–í–õ–ï–ù–û: –£–±—Ä–∞–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–æ–∫–∞
  /* board.style.gridTemplateColumns = "repeat(4, 1fr)"; */

  // –î–û–ë–ê–í–õ–ï–ù–û: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–µ—Ç–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
  if (pairs <= 4) { // Level 1 (4 –ø–∞—Ä—ã / 8 –∫–∞—Ä—Ç)
    board.style.gridTemplateColumns = "repeat(4, 1fr)";
    board.style.maxWidth = "500px"; // –£–∑–∫–∞—è –¥–æ—Å–∫–∞ –¥–ª—è 4x2
  } else { // Level 2 (8 –ø–∞—Ä / 16 –∫–∞—Ä—Ç) –∏ Level 3 (16 –ø–∞—Ä / 32 –∫–∞—Ä—Ç—ã)
    board.style.gridTemplateColumns = "repeat(8, 1fr)"; // 8 –∫–æ–ª–æ–Ω–æ–∫
    board.style.maxWidth = "900px"; // –®–∏—Ä–æ–∫–∞—è –¥–æ—Å–∫–∞ –¥–ª—è 8x2 –∏ 8x4
  }
  // –ö–û–ù–ï–¶ –î–û–ë–ê–í–õ–ï–ù–ù–û–ì–û

  cards.forEach(src => {
    const card = document.createElement("div");
    card.classList.add("card");
    card.innerHTML = `
      <div class="card-face card-front"><span>?</span></div>
      <div class="card-face card-back"><img src="${src}" alt="card image" onerror="this.src='https://placehold.co/100x100/230800/fad7d1?text=Error'"/></div>
    `;
    // –î–æ–±–∞–≤–ª–µ–Ω onerror –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
    card.addEventListener("click", () => flipCard(card, src));
    board.appendChild(card);
  });

  updateBestScore();
}

function flipCard(card, src) {
  if (lockBoard || card.classList.contains("flip")) return;

  // –î–û–ë–ê–í–õ–ï–ù–û: –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–æ –ø–µ—Ä–≤–æ–º—É –∫–ª–∏–∫—É
  if (!gameStarted) {
    gameStarted = true;
    timer = setInterval(() => {
      if (gameStarted) { // –≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—É–¥—É—â–µ–π "–ø–∞—É–∑–µ" —Ä–∞–±–æ—Ç–∞—Ç—å
        seconds++;
        document.getElementById("time").innerText = seconds;
      }
    }, 1000);
  }
  // –ö–û–ù–ï–¶ –î–û–ë–ê–í–õ–ï–ù–ù–û–ì–û

  card.classList.add("flip");

  if (!firstCard) {
    firstCard = { card, src };
    return;
  }

  moves++;
  document.getElementById("moves").innerText = moves;

  if (firstCard.src === src) {
    matchedPairs++;
    firstCard = null;

    const pairsNeeded = levelConfigs[currentLevel];
    if (matchedPairs === pairsNeeded) {
      clearInterval(timer);
      setTimeout(showModal, 600);
    }
  } else {
    lockBoard = true;
    setTimeout(() => {
      card.classList.remove("flip");
      firstCard.card.classList.remove("flip");
      firstCard = null;
      lockBoard = false;
    }, 900); // –ù–µ–º–Ω–æ–≥–æ –¥–æ–ª—å—à–µ, —á—Ç–æ–±—ã —É—Å–ø–µ—Ç—å —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å
  }
}

function showModal() {
  const modal = document.getElementById("finish-modal");
  const content = document.getElementById("finish-content");
  modal.style.display = "flex";
  gameStarted = false; // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º "–∏–≥—Ä—É" –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π
  const maxLevel = Object.keys(levelConfigs).length;

  let html = `
    <h2>Level ${currentLevel} Complete! üß©</h2>
    <p>‚è± Time: ${seconds}s</p>
    <p>üéØ Moves: ${moves}</p>
  `;

  if (currentLevel < maxLevel) {
    html += `<button id="next-level" onclick="advanceLevel()">Next Level ‚û°Ô∏è</button>`;
  } else {
    html = `
      <h2>‚ú® Training completed! ‚ú®</h2>
      <p>You matched all pairs successfully.</p>
      <p>‚è± Time: ${seconds}s</p>
      <p>üéØ Moves: ${moves}</p>
      <button onclick="closeModal(); startGame();">Play Again</button>
    `;
  }

  content.innerHTML = html;

  const bestTimeKey = `bestTime_lvl${currentLevel}`;
  const bestMovesKey = `bestMoves_lvl${currentLevel}`;
  const bestTime = localStorage.getItem(bestTimeKey);
  const bestMoves = localStorage.getItem(bestMovesKey);

  if (!bestTime || seconds < parseInt(bestTime)) localStorage.setItem(bestTimeKey, seconds.toString());
  if (!bestMoves || moves < parseInt(bestMoves)) localStorage.setItem(bestMovesKey, moves.toString());


  updateBestScore();
}

function advanceLevel() {
  document.getElementById("finish-modal").style.display = "none";
  const maxLevel = Object.keys(levelConfigs).length;
  if (currentLevel < maxLevel) {
    currentLevel++;
    setTimeout(initLevel, 300);
  }
}

function closeModal() {
  document.getElementById("finish-modal").style.display = "none";
}

function updateBestScore() {
  const bestTime = localStorage.getItem(`bestTime_lvl${currentLevel}`);
  const bestMoves = localStorage.getItem(`bestMoves_lvl${currentLevel}`);
  document.getElementById("best-time").innerText = bestTime || "‚Äì";
  document.getElementById("best-moves").innerText = bestMoves || "‚Äì";
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—á–µ—Ç –¥–ª—è —É—Ä–æ–≤–Ω—è 1 –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
updateBestScore();
// –ù–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É —Å—Ä–∞–∑—É
startGame();
</script>

</body>
</html>
